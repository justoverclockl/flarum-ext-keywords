{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@justoverclock/flarum-ext-keywords/webpack/bootstrap","webpack://@justoverclock/flarum-ext-keywords/webpack/runtime/compat get default export","webpack://@justoverclock/flarum-ext-keywords/webpack/runtime/define property getters","webpack://@justoverclock/flarum-ext-keywords/webpack/runtime/hasOwnProperty shorthand","webpack://@justoverclock/flarum-ext-keywords/webpack/runtime/make namespace object","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['app']\"","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['common/extend']\"","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@justoverclock/flarum-ext-keywords/./src/forum/replaceKeywords.js","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['components/IndexPage']\"","webpack://@justoverclock/flarum-ext-keywords/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['components/Page']\"","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@justoverclock/flarum-ext-keywords/./src/forum/components/GlossaryPage.js","webpack://@justoverclock/flarum-ext-keywords/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['components/LinkButton']\"","webpack://@justoverclock/flarum-ext-keywords/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","/*\n * This file is part of justoverclock/flarum-ext-keywords.\n *\n * Copyright (c) 2021 Marco Colia.\n * Special thanks to Askvortsov\n * https://flarum.it\n *\n * For the full copyright and license information, please view the LICENSE.md\n * file that was distributed with this source code.\n */\n\nimport app from 'flarum/app';\n\nexport default function () {\n  const post = this.attrs.post;\n\n  if (post) {\n    const mappings = JSON.parse(app.forum.attribute('AdDef'));\n\n    if (Object.keys(mappings).length === 0) {\n      return;\n    }\n\n    const parseOnce = app.forum.attribute('ParseOnce') === true;\n    const regexFlags = parseOnce ? 'i' : 'gi';\n    const regex = new RegExp('\\\\b(' + Object.keys(mappings).join('|') + ')\\\\b(?![^<]*>|[^<>]*</[^p])', regexFlags);\n\n    this.attrs.post.data.attributes.contentHtml = post.contentHtml().replace(regex, (match) => {\n      const tooltip = mappings[match.toLowerCase()];\n\n      if (tooltip) {\n        return `<span class=\"definition\" data-tooltip=\"${tooltip}\">${match}</span>`;\n      } else {\n        return match;\n      }\n    });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/IndexPage'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","import app from 'flarum/app';\nimport Page from 'flarum/components/Page';\nimport IndexPage from 'flarum/components/IndexPage';\nimport listItems from 'flarum/common/helpers/listItems';\n\n/* global m */\n\nexport default class GlossaryPage extends Page {\n  constructor() {\n    super();\n    this.displayCount = 10;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    app.setTitle(app.translator.trans('flarum-ext-keywords.forum.pagetitle'));\n    app.setTitleCount(0);\n  }\n\n  loadMore() {\n    this.displayCount += 10;\n  }\n\n  view() {\n    const mappings = JSON.parse(app.forum.attribute('AdDef'));\n    console.log(mappings);\n\n    window.addEventListener('DOMContentLoaded', () => {\n      const filterInput = document.getElementById('filter');\n      filterInput.addEventListener('keyup', () => {\n        const filter = filterInput.value;\n        let count = 0;\n\n        document.querySelectorAll('.defContainer').forEach((def) => {\n          if (def.textContent.search(new RegExp(filter, 'i')) < 0) {\n            def.style.display = 'none';\n          } else {\n            def.style.display = 'block';\n            count++;\n          }\n        });\n      });\n    });\n\n    return (\n      <div className=\"IndexPage\">\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"IndexPage-nav sideNav\">\n              <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"IndexPage-results sideNavOffset\">\n              <h1 className=\"glostitle\">{app.translator.trans('flarum-ext-keywords.forum.pagetitle')}</h1>\n              <div className=\"rowgl\">\n                <div className=\"columngl\">\n                  <div className=\"leftdiv\">\n                    <h3 className=\"tagline\">{app.translator.trans('flarum-ext-keywords.forum.tagline')}</h3>\n                  </div>\n                </div>\n                <div className=\"columngl\">\n                  <div className=\"rightdiv\">\n                    <form className=\"searchform cf\">\n                      <input\n                        id=\"filter\"\n                        type=\"text\"\n                        placeholder={app.translator.trans('flarum-ext-keywords.forum.searchtext')}\n                      />\n                    </form>\n                  </div>\n                </div>\n              </div>\n              <div className=\"containDef\">\n                {Object.keys(mappings)\n                  .sort()\n                  .slice(0, this.displayCount)\n                  .map((key) => (\n                    <div className=\"defContainer\">\n                      <div className=\"defTitle\">\n                        <strong>{app.translator.trans('flarum-ext-keywords.forum.term')}</strong>: {key}\n                      </div>\n                      <div className=\"defDesc\">\n                        <strong>{app.translator.trans('flarum-ext-keywords.forum.definition')}</strong>: {mappings[key]}\n                      </div>\n                    </div>\n                  ))}\n              </div>\n              <div className=\"loadMoreContainer\">\n              {Object.keys(mappings).length > this.displayCount && (\n                <button onclick={() => this.loadMore()} className=\"Button loadMoreDefButton\">\n                  {app.translator.trans('flarum-ext-keywords.forum.loadMore')}\n                </button>\n              )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LinkButton'];","/*\r\n * This file is part of justoverclock/flarum-ext-keywords.\r\n *\r\n * Copyright (c) 2021 Marco Colia.\r\n * Special thanks to Askvortsov\r\n * https://flarum.it\r\n *\r\n * For the full copyright and license information, please view the LICENSE.md\r\n * file that was distributed with this source code.\r\n */\r\n\r\nimport app from 'flarum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport CommentPost from 'flarum/forum/components/CommentPost';\r\nimport replaceKeywords from './replaceKeywords';\r\nimport IndexPage from 'flarum/components/IndexPage';\r\nimport GlossaryPage from './components/GlossaryPage';\r\nimport LinkButton from 'flarum/components/LinkButton';\r\n\r\napp.initializers.add('justoverclock/flarum-ext-keywords', () => {\r\n  extend(CommentPost.prototype, 'oninit', replaceKeywords);\r\n});\r\napp.routes.GlossaryPage = {\r\n  path: '/glossary',\r\n  component: GlossaryPage,\r\n};\r\nextend(IndexPage.prototype, 'navItems', (navItems) => {\r\n  navItems.add(\r\n    'Glossary',\r\n    <LinkButton href={app.route('GlossaryPage')} icon=\"fas fa-atlas\">\r\n      {app.translator.trans('flarum-ext-keywords.forum.title')}\r\n    </LinkButton>,\r\n    100\r\n  );\r\n  return navItems;\r\n});\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","post","this","attrs","mappings","JSON","parse","app","attribute","keys","length","regexFlags","regex","RegExp","join","data","attributes","contentHtml","replace","match","tooltip","toLowerCase","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","GlossaryPage","_Page","subClass","superClass","_this","displayCount","create","constructor","_proto","oncreate","vnode","trans","loadMore","view","_this2","console","log","window","addEventListener","filterInput","document","getElementById","filter","querySelectorAll","forEach","def","textContent","search","style","display","m","className","IndexPage","hero","listItems","sidebarItems","toArray","id","type","placeholder","sort","slice","map","onclick","Page","add","extend","CommentPost","replaceKeywords","path","component","navItems","LinkButton","href","icon"],"sourceRoot":""}