{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@justoverclock/flarum-ext-keywords/webpack/bootstrap","webpack://@justoverclock/flarum-ext-keywords/webpack/runtime/compat get default export","webpack://@justoverclock/flarum-ext-keywords/webpack/runtime/define property getters","webpack://@justoverclock/flarum-ext-keywords/webpack/runtime/hasOwnProperty shorthand","webpack://@justoverclock/flarum-ext-keywords/webpack/runtime/make namespace object","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['app']\"","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['common/extend']\"","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@justoverclock/flarum-ext-keywords/./src/forum/replaceKeywords.js","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['components/IndexPage']\"","webpack://@justoverclock/flarum-ext-keywords/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['components/Page']\"","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@justoverclock/flarum-ext-keywords/./src/forum/components/GlossaryPage.js","webpack://@justoverclock/flarum-ext-keywords/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@justoverclock/flarum-ext-keywords/external root \"flarum.core.compat['components/LinkButton']\"","webpack://@justoverclock/flarum-ext-keywords/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","/*\n * This file is part of justoverclock/flarum-ext-keywords.\n *\n * Copyright (c) 2021 Marco Colia.\n * Special thanks to Askvortsov\n * https://flarum.it\n *\n * For the full copyright and license information, please view the LICENSE.md\n * file that was distributed with this source code.\n */\n\nimport app from 'flarum/app';\n\nexport default function () {\n  const post = this.attrs.post;\n\n  // Read the form input as JSON\n  const mappings = JSON.parse(app.forum.attribute('AdDef'));\n\n  if (Object.keys(mappings).length === 0) {\n    return;\n  }\n\n  const parseOnce = app.forum.attribute('ParseOnce') === true;\n  const regexFlags = parseOnce ? 'i' : 'gi';\n  const regex = new RegExp('\\\\b(' + Object.keys(mappings).join('|') + ')\\\\b(?![^<]*>|[^<>]*</[^p])', regexFlags);\n\n  this.attrs.post.data.attributes.contentHtml = post.contentHtml().replace(regex, (match) => {\n    const tooltip = mappings[match.toLowerCase()];\n\n    if (tooltip) {\n      return `<span class=\"definition\" data-tooltip=\"${tooltip}\">${match}</span>`;\n    } else {\n      return match;\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/IndexPage'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","import app from 'flarum/app';\r\nimport Page from 'flarum/components/Page';\r\nimport IndexPage from 'flarum/components/IndexPage';\r\nimport listItems from 'flarum/common/helpers/listItems';\r\n\r\n/*  global m  */\r\n/*  global $  */\r\n\r\nexport default class GlossaryPage extends Page {\r\n  oncreate(vnode) {\r\n    super.oncreate(vnode);\r\n    app.setTitle(app.translator.trans('flarum-ext-keywords.forum.pagetitle'));\r\n    app.setTitleCount(0);\r\n  }\r\n\r\n  view() {\r\n    const mappings = JSON.parse(app.forum.attribute('AdDef'));\r\n\r\n    // Funzione ricerca live\r\n    $(document).ready(function () {\r\n      $('#filter').keyup(function () {\r\n        // Ricerca dal campo di testo\r\n        var filter = $(this).val(),\r\n          count = 0;\r\n\r\n        // Lopp nella lista ordinata ol e li\r\n        $('ol li').each(function () {\r\n          // Nascondi i risultati che non servono pi√π\r\n          if ($(this).text().search(new RegExp(filter, 'i')) < 0) {\r\n            $(this).fadeOut();\r\n\r\n            // Alrimenti mostra tutto il contenuto della pagina\r\n          } else {\r\n            $(this).show();\r\n            count++;\r\n          }\r\n        });\r\n      });\r\n    });\r\n\r\n    return m('.IndexPage', [\r\n      IndexPage.prototype.hero(),\r\n      m(\r\n        '.container',\r\n        m('.sideNavContainer', [\r\n          m('nav.IndexPage-nav.sideNav', m('ul', listItems(IndexPage.prototype.sidebarItems().toArray()))),\r\n          m('.IndexPage-results.sideNavOffset',\r\n            m('h1', { className: 'glostitle' }, app.translator.trans('flarum-ext-keywords.forum.pagetitle')),\r\n            m('div', { className: 'rowgl' }, [\r\n              m(\r\n                'div',\r\n                { className: 'columngl' },\r\n                m('div', { className: 'leftdiv' },\r\n                  m('h3', { className: 'tagline' }, app.translator.trans('flarum-ext-keywords.forum.tagline')))\r\n              ),\r\n              m('div',\r\n                { className: 'columngl' },\r\n                m(\r\n                  'div',\r\n                  { className: 'rightdiv' },\r\n                  m('form', { className: 'searchform cf' }, [\r\n                    m('input', {\r\n                      id: 'filter',\r\n                      type: 'text',\r\n                      placeholder: app.translator.trans('flarum-ext-keywords.forum.searchtext'),\r\n                    }),\r\n                  ])\r\n                )\r\n              ),\r\n            ]),\r\n            m('div',\r\n              { className: 'containDef' },\r\n              m(\r\n                'ol',\r\n                { id: 'myUL', className: 'rectangle-list' },\r\n                Object.keys(mappings)\r\n                  .sort()\r\n                  .map((key) => m('li', { className: 'lista' }, key + ' - ' +  mappings[key]))\r\n              )\r\n            )\r\n          ),\r\n        ])\r\n      ),\r\n    ]);\r\n  }\r\n}\r\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LinkButton'];","/*\r\n * This file is part of justoverclock/flarum-ext-keywords.\r\n *\r\n * Copyright (c) 2021 Marco Colia.\r\n * Special thanks to Askvortsov\r\n * https://flarum.it\r\n *\r\n * For the full copyright and license information, please view the LICENSE.md\r\n * file that was distributed with this source code.\r\n */\r\n\r\nimport app from 'flarum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport CommentPost from 'flarum/forum/components/CommentPost';\r\nimport replaceKeywords from './replaceKeywords';\r\nimport IndexPage from 'flarum/components/IndexPage';\r\nimport GlossaryPage from './components/GlossaryPage';\r\nimport LinkButton from 'flarum/components/LinkButton';\r\n\r\napp.initializers.add('justoverclock/flarum-ext-keywords', () => {\r\n  extend(CommentPost.prototype, 'oninit', replaceKeywords);\r\n});\r\napp.routes.GlossaryPage = {\r\n  path: '/glossary',\r\n  component: GlossaryPage,\r\n};\r\nextend(IndexPage.prototype, 'navItems', (navItems) => {\r\n  navItems.add(\r\n    'Glossary',\r\n    <LinkButton href={app.route('GlossaryPage')} icon=\"fas fa-atlas\">\r\n      {app.translator.trans('flarum-ext-keywords.forum.title')}\r\n    </LinkButton>,\r\n    100\r\n  );\r\n  return navItems;\r\n});\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","post","this","attrs","mappings","JSON","parse","app","attribute","keys","length","regexFlags","regex","RegExp","join","data","attributes","contentHtml","replace","match","tooltip","toLowerCase","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","GlossaryPage","_Page","subClass","superClass","apply","arguments","create","constructor","_proto","oncreate","vnode","trans","view","$","document","ready","keyup","filter","val","each","text","search","fadeOut","show","m","IndexPage","hero","listItems","sidebarItems","toArray","className","id","type","placeholder","sort","map","Page","add","extend","CommentPost","replaceKeywords","path","component","navItems","LinkButton","href","icon"],"sourceRoot":""}